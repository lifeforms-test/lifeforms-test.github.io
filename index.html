<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–§–æ—Ä–º–∞ –∂–∏–∑–Ω–∏</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    :root { --pad: 18px; --radius: 16px; }
    body {
      font-family: 'Press Start 2P', monospace;
      margin: 0; padding: 0;
      background: #0b0e12;
color: #e6f0ff;
    }
    .wrap { max-width: 780px; margin: 0 auto; padding: 28px 16px; }
    .card {
  background: #020617;
  border: 2px solid #38bdf8;
  border-radius: 0;
  padding: var(--pad);
  box-shadow:
    0 0 0 2px #0f766e,
    6px 6px 0 #000;
    }
    h1 { margin: 0 0 8px; font-size: 28px; }
    .muted { opacity: .75; line-height: 1.5; }
    .row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
    .spacer { height: 14px; }
    .progress {
      height: 10px; border-radius: 999px; overflow: hidden;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.08);
    }
    .bar { height: 100%; width: 0%; background: rgba(233,238,247,0.65); }
    .qtitle { margin: 14px 0 10px; font-size: 18px; line-height: 1.35; }
    .answers { display: grid; gap: 10px; margin-top: 10px; }
    button.choice {
      width: 100%;
      text-align: left;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.03);
      color: inherit;
      cursor: pointer;
      transition: transform .04s ease, background .15s ease, border-color .15s ease;
    }
    button.choice:hover { background: rgba(255,255,255,0.06); border-color: rgba(255,255,255,0.16); }
    button.choice:active { transform: translateY(1px); }

    .btn {
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: inherit;
      cursor: pointer;
    }
    .btn.primary { background: rgba(233,238,247,0.16); }
    .btn:disabled { opacity: .5; cursor: not-allowed; }
    .pill {
      display: inline-block;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      font-size: 13px;
      opacity: .9;
    }
    .resultTitle { font-size: 22px; margin: 10px 0 6px; }
    .grid2 { display:grid; grid-template-columns: 1fr; gap: 12px; }
    @media (min-width: 740px) { .grid2 { grid-template-columns: 1fr 1fr; } }
    .mini { font-size: 13px; opacity: .75; line-height: 1.45; }
    .scoreRow { display:flex; justify-content:space-between; gap:10px; }
    .scoreBarWrap { height: 8px; border-radius: 999px; overflow:hidden; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.08); }
    .scoreBar { height: 100%; width: 0%; background: rgba(233,238,247,0.65); }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="app"></div>
    <div class="spacer"></div>
    <div class="muted mini">–ü–æ–¥—Å–∫–∞–∑–∫–∞: –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è. –≠—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ üôÇ</div>
  </div>

  <script>
    // –¢–∏–ø—ã (–Ω–∞—à–∏ –Ω–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è)
    const TYPES = {
      mammal: "–ú–ª–µ–∫–æ–ø–∏—Ç–∞—é—â–µ–µ",
      reptile: "–†–µ–ø—Ç–∏–ª–∏—è",
      tree: "–î—Ä–µ–≤–æ",
      mycelium: "–ú–∏—Ü–µ–ª–∏–π",
      hive: "–£–ª–µ–π",
    };

    // –ö–æ—Ä–æ—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è (–ø–æ–∫–∞ –±–∞–∑–æ–≤—ã–µ ‚Äî –ø–æ—Ç–æ–º –æ—Ç—à–ª–∏—Ñ—É–µ–º)
    const TYPE_DESC = {
      mammal: "–¢–µ–ø–ª–æ, –∫–æ–Ω—Ç–∞–∫—Ç, –±–ª–∏–∑–æ—Å—Ç—å, ¬´—è –∂–∏–≤—É —á–µ—Ä–µ–∑ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∏ —ç–º–æ—Ü–∏–∏¬ª.",
      reptile: "–ê–¥–∞–ø—Ç–∞—Ü–∏—è, –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ, —ç–∫–æ–Ω–æ–º–∏—è —ç–Ω–µ—Ä–≥–∏–∏, —Ç–æ—á–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏.",
      tree: "–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, —Å–≤–æ–π —Ç–µ–º–ø, —Ä–æ—Å—Ç, —Å–ø–æ–∫–æ–π–Ω–∞—è —Å–∏–ª–∞ –∏ –æ–ø–æ—Ä–∞.",
      mycelium: "–ì–ª—É–±–∏–Ω–∞, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å–∫—Ä—ã—Ç—ã–µ —Å–≤—è–∑–∏, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∂–∏–∑–Ω—å.",
      hive: "–°—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ä–∏—Ç–º, –≤–∫–ª–∞–¥, ¬´–º–Ω–µ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –≤—Å—ë —Ä–∞–±–æ—Ç–∞–ª–æ¬ª.",
    };

    // –í–æ–ø—Ä–æ—Å—ã: –æ—Ç–≤–µ—Ç—ã —É–∂–µ ¬´—Å–∫—Ä—ã—Ç—ã¬ª (–±–µ–∑ —ç–º–æ–¥–∑–∏), –Ω–æ –≤–µ—Å–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–≤–æ–µ–π –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–µ.
    // –í–µ—Å–∞: –¥–∞—ë–º 2 –æ—á–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Ç–∏–ø—É –∏ 1 –æ—á–∫–æ —Å–æ—Å–µ–¥–Ω–µ–º—É (—á—Ç–æ–±—ã —Ç–µ—Å—Ç –±—ã–ª –º—è–≥—á–µ).
    const QUESTIONS = [
      {
        text: "–¢–≤–æ–π –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∏—Ç–º –∂–∏–∑–Ω–∏ –±–ª–∏–∂–µ –∫ —Ç–æ–º—É, —á—Ç–æ–±—ã:",
        answers: [
          { t: "–ñ–∏—Ç—å —Ä–∞–∑–º–µ—Ä–µ–Ω–Ω–æ, –Ω–µ —É—Å–∫–æ—Ä—è—è—Å—å –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏", w: { tree: 2, mycelium: 1 } },
          { t: "–ü–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è –ø–æ–¥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∞ –Ω–µ –ø–æ–¥ —á–∞—Å—ã", w: { mycelium: 2, tree: 1 } },
          { t: "–î–µ–ª–∞—Ç—å –º–Ω–æ–≥–æ–µ, –µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ü–µ–ª—å", w: { hive: 2, mammal: 1 } },
          { t: "–ß–µ—Ä–µ–¥–æ–≤–∞—Ç—å –¥–æ–ª–≥–∏–µ –ø–µ—Ä–∏–æ–¥—ã –ø–æ–∫–æ—è —Å –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –≤—Å–ø–ª–µ—Å–∫–∞–º–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏", w: { reptile: 2, hive: 1 } },
          { t: "–ñ–∏—Ç—å —á–µ—Ä–µ–∑ —ç–º–æ—Ü–∏–∏ –∏ —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Å–∞–º–∏ –∑–∞–¥–∞—é—Ç —Ç–µ–º–ø", w: { mammal: 2, mycelium: 1 } },
        ],
      },
      {
        text: "–ö–æ–≥–¥–∞ –≤–Ω–µ—à–Ω–∏–π –º–∏—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å —É—Å–∫–æ—Ä–µ–Ω–∏—è, —Ç—ã —Å–∫–æ—Ä–µ–µ:",
        answers: [
          { t: "–°–æ–ø—Ä–æ—Ç–∏–≤–ª—è–µ—à—å—Å—è –∏ —Å—Ç–∞—Ä–∞–µ—à—å—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å", w: { tree: 2, mammal: 1 } },
          { t: "–ù–∞—á–∏–Ω–∞–µ—à—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É –∏ —É—Ö–æ–¥–∏—à—å ¬´–≤–Ω—É—Ç—Ä—å¬ª", w: { mycelium: 2, reptile: 1 } },
          { t: "–°–æ–±–∏—Ä–∞–µ—à—å—Å—è –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—à—å —Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è", w: { hive: 2, reptile: 1 } },
          { t: "–°–æ–∫—Ä–∞—â–∞–µ—à—å –≤—Å—ë –ª–∏—à–Ω–µ–µ –¥–æ –º–∏–Ω–∏–º—É–º–∞", w: { reptile: 2, hive: 1 } },
          { t: "–†–µ–∞–≥–∏—Ä—É–µ—à—å —á–µ—Ä–µ–∑ —Å—Ç—Ä–µ—Å—Å –∏–ª–∏ –≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µ", w: { mammal: 2, hive: 1 } },
        ],
      },
      {
        text: "–°—Ç–æ–ª–∫–Ω—É–≤—à–∏—Å—å —Å —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏, —Ç—ã —á–∞—â–µ:",
        answers: [
          { t: "–¢–µ—Ä–ø–µ–ª–∏–≤–æ –ø–µ—Ä–µ–∂–∏–¥–∞–µ—à—å", w: { tree: 2, reptile: 1 } },
          { t: "–ü–µ—Ä–µ–æ—Å–º—ã—Å–ª–∏–≤–∞–µ—à—å –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ", w: { mycelium: 2, tree: 1 } },
          { t: "–†–µ—à–∞–µ—à—å –ø—Ä–æ–±–ª–µ–º—É —à–∞–≥ –∑–∞ —à–∞–≥–æ–º", w: { hive: 2, tree: 1 } },
          { t: "–ü—Ä—è—á–µ—à—å—Å—è –∏ —ç–∫–æ–Ω–æ–º–∏—à—å —Å–∏–ª—ã", w: { reptile: 2, mycelium: 1 } },
          { t: "–ü—Ä–æ–∂–∏–≤–∞–µ—à—å —ç—Ç–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ", w: { mammal: 2, mycelium: 1 } },
        ],
      },
      {
        text: "–ù–µ—É–¥–∞—á–∏ –¥–ª—è —Ç–µ–±—è ‚Äî —ç—Ç–æ:",
        answers: [
          { t: "–ß–∞—Å—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞", w: { tree: 2, mycelium: 1 } },
          { t: "–ú–∞—Ç–µ—Ä–∏–∞–ª –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏", w: { mycelium: 2, mammal: 1 } },
          { t: "–û—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å", w: { hive: 2, reptile: 1 } },
          { t: "–°–∏–≥–Ω–∞–ª –ø–µ—Ä–µ–∂–¥–∞—Ç—å –∏ –Ω–µ –≤—ã—Å–æ–≤—ã–≤–∞—Ç—å—Å—è", w: { reptile: 2, tree: 1 } },
          { t: "–ë–æ–ª—å, –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ", w: { mammal: 2, tree: 1 } },
        ],
      },
      {
        text: "–í –æ–±—â–µ–Ω–∏–∏ —Å –ª—é–¥—å–º–∏ —Ç—ã –±–æ–ª—å—à–µ —Ü–µ–Ω–∏—à—å:",
        answers: [
          { t: "–°–ø–æ–∫–æ–π–Ω–æ–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ —Ä—è–¥–æ–º", w: { tree: 2, mammal: 1 } },
          { t: "–ì–ª—É–±–∏–Ω—É –∏ —Ç–æ–Ω–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ", w: { mycelium: 2, mammal: 1 } },
          { t: "–ß—ë—Ç–∫–∏–µ —Ä–æ–ª–∏ –∏ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏", w: { hive: 2, reptile: 1 } },
          { t: "–î–∏—Å—Ç–∞–Ω—Ü–∏—é –∏ –ª–∏—á–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã", w: { reptile: 2, mycelium: 1 } },
          { t: "–ë–ª–∏–∑–æ—Å—Ç—å –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç", w: { mammal: 2, tree: 1 } },
        ],
      },
      {
        text: "–ö–æ–≥–¥–∞ —Ç—ã –æ—Å—Ç–∞—ë—à—å—Å—è –æ–¥–∏–Ω, —ç—Ç–æ:",
        answers: [
          { t: "–≠—Ç–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ", w: { tree: 2, reptile: 1 } },
          { t: "–≠—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –∂–∏–∑–Ω–∏", w: { mycelium: 2, tree: 1 } },
          { t: "–≠—Ç–æ –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏", w: { hive: 2, reptile: 1 } },
          { t: "–≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ", w: { reptile: 2, tree: 1 } },
          { t: "–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–≤–æ–ª—å–Ω–æ —Ç—è–∂–µ–ª–æ", w: { mammal: 2, mycelium: 1 } },
        ],
      },
      {
        text: "–û–±—â–µ—Å—Ç–≤–æ –¥–ª—è —Ç–µ–±—è ‚Äî —ç—Ç–æ:",
        answers: [
          { t: "–°—Ä–µ–¥–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ç—ã –ø—Ä–æ—Å—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—à—å", w: { tree: 2, mycelium: 1 } },
          { t: "–°–ª–æ–∂–Ω–∞—è —Å–µ—Ç—å –≤–∑–∞–∏–º–Ω—ã—Ö –≤–ª–∏—è–Ω–∏–π", w: { mycelium: 2, hive: 1 } },
          { t: "–°–∏—Å—Ç–µ–º–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π —É –∫–∞–∂–¥–æ–≥–æ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è", w: { hive: 2, tree: 1 } },
          { t: "–ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è", w: { reptile: 2, mammal: 1 } },
          { t: "–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –æ—Ç–Ω–æ—à–µ–Ω–∏–π", w: { mammal: 2, tree: 1 } },
        ],
      },
      {
        text: "–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ç—ã:",
        answers: [
          { t: "–ü—Ä–∏–Ω–∏–º–∞–µ—à—å –∫–∞–∫ –¥–∞–Ω–Ω–æ—Å—Ç—å", w: { tree: 2, reptile: 1 } },
          { t: "–ß—É–≤—Å—Ç–≤—É–µ—à—å, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–Ω–∏–º–∞–µ—à—å", w: { mycelium: 2, mammal: 1 } },
          { t: "–°—Ç–∞—Ä–∞–µ—à—å—Å—è —Å–æ–±–ª—é–¥–∞—Ç—å", w: { hive: 2, tree: 1 } },
          { t: "–ò–∑–±–µ–≥–∞–µ—à—å, –µ—Å–ª–∏ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å", w: { reptile: 2, mycelium: 1 } },
          { t: "–ü–µ—Ä–µ–∂–∏–≤–∞–µ—à—å —á–µ—Ä–µ–∑ —á—É–≤—Å—Ç–≤–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏", w: { mammal: 2, hive: 1 } },
        ],
      },
      {
        text: "–ü—Ä–∏—Ä–æ–¥–∞ –¥–ª—è —Ç–µ–±—è ‚Äî —ç—Ç–æ:",
        answers: [
          { t: "–î–æ–º", w: { tree: 2, mammal: 1 } },
          { t: "–ñ–∏–≤–∞—è, —á—É–≤—Å—Ç–≤—É—é—â–∞—è —Å—Ä–µ–¥–∞", w: { mycelium: 2, tree: 1 } },
          { t: "–†–µ—Å—É—Ä—Å –∏ —Å–∏—Å—Ç–µ–º–∞", w: { hive: 2, reptile: 1 } },
          { t: "–°—Ä–µ–¥–∞ –≤—ã–∂–∏–≤–∞–Ω–∏—è", w: { reptile: 2, hive: 1 } },
          { t: "–ò—Å—Ç–æ—á–Ω–∏–∫ —á—É–≤—Å—Ç–≤", w: { mammal: 2, mycelium: 1 } },
        ],
      },
      {
        text: "–ö–æ–≥–¥–∞ —Ç—ã –æ–∫–∞–∑—ã–≤–∞–µ—à—å—Å—è –≤ –ø—Ä–∏—Ä–æ–¥–Ω–æ–π —Å—Ä–µ–¥–µ, —Ç—ã:",
        answers: [
          { t: "–£—Å–ø–æ–∫–∞–∏–≤–∞–µ—à—å—Å—è", w: { tree: 2, reptile: 1 } },
          { t: "–ù–∞—á–∏–Ω–∞–µ—à—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è ¬´–Ω–∞ –º–µ—Å—Ç–µ¬ª", w: { mycelium: 2, tree: 1 } },
          { t: "–ù–∞–±–ª—é–¥–∞–µ—à—å –∏ –∏–∑—É—á–∞–µ—à—å", w: { hive: 2, reptile: 1 } },
          { t: "–†–∞—Å—Å–ª–∞–±–ª—è–µ—à—å—Å—è —Ç–µ–ª–æ–º", w: { reptile: 2, tree: 1 } },
          { t: "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–∞–ø–æ–ª–Ω—è–µ—à—å—Å—è", w: { mammal: 2, mycelium: 1 } },
        ],
      },
      {
        text: "–ï–¥–∞ –¥–ª—è —Ç–µ–±—è ‚Äî —ç—Ç–æ –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ:",
        answers: [
          { t: "–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –∂–∏–∑–Ω–∏", w: { tree: 2, reptile: 1 } },
          { t: "–ß—É–≤—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–ø—ã—Ç", w: { mycelium: 2, mammal: 1 } },
          { t: "–¢–æ–ø–ª–∏–≤–æ", w: { hive: 2, reptile: 1 } },
          { t: "–≠–Ω–µ—Ä–≥–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤–∞–∂–Ω–æ –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å –∑—Ä—è", w: { reptile: 2, hive: 1 } },
          { t: "–ò—Å—Ç–æ—á–Ω–∏–∫ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è –∏ —Ç–µ–ø–ª–∞", w: { mammal: 2, tree: 1 } },
        ],
      },
      {
        text: "–û–±—ã—á–Ω–æ —Ç—ã:",
        answers: [
          { t: "–ï—à—å –ø—Ä–æ—Å—Ç–æ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ", w: { tree: 2, hive: 1 } },
          { t: "–ß—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ –∏ –∫–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è", w: { mycelium: 2, mammal: 1 } },
          { t: "–°–ª–µ–¥–∏—à—å –∑–∞ —Ä–µ–∂–∏–º–æ–º –∏–ª–∏ –ø–æ–ª—å–∑–æ–π", w: { hive: 2, tree: 1 } },
          { t: "–ú–æ–∂–µ—à—å –¥–æ–ª–≥–æ –æ–±—Ö–æ–¥–∏—Ç—å—Å—è –±–µ–∑ –µ–¥—ã", w: { reptile: 2, tree: 1 } },
          { t: "–°–≤—è–∑—ã–≤–∞–µ—à—å –µ–¥—É —Å —ç–º–æ—Ü–∏—è–º–∏", w: { mammal: 2, mycelium: 1 } },
        ],
      },
      {
        text: "–¢–≤–æ—ë –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —Ä–æ–¥–∏—Ç–µ–ª—è–º –±–ª–∏–∂–µ –∫:",
        answers: [
          { t: "–ü—Ä–∏–Ω—è—Ç–∏—é", w: { tree: 2, mycelium: 1 } },
          { t: "–°–ª–æ–∂–Ω–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–≤—è–∑–∏", w: { mycelium: 2, mammal: 1 } },
          { t: "–ß—É–≤—Å—Ç–≤—É –¥–æ–ª–≥–∞", w: { hive: 2, tree: 1 } },
          { t: "–î–∏—Å—Ç–∞–Ω—Ü–∏–∏", w: { reptile: 2, mycelium: 1 } },
          { t: "–°–∏–ª—å–Ω—ã–º, –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–º —ç–º–æ—Ü–∏—è–º", w: { mammal: 2, reptile: 1 } },
        ],
      },
      {
        text: "–î—É–º–∞—è –æ –¥–µ—Ç—è—Ö (—Ä–µ–∞–ª—å–Ω—ã—Ö –∏–ª–∏ –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö), —Ç—ã —Å–∫–æ—Ä–µ–µ –¥—É–º–∞–µ—à—å –æ:",
        answers: [
          { t: "–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏", w: { tree: 2, hive: 1 } },
          { t: "–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º –º–∏—Ä–µ", w: { mycelium: 2, tree: 1 } },
          { t: "–í–æ—Å–ø–∏—Ç–∞–Ω–∏–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ", w: { hive: 2, mammal: 1 } },
          { t: "–í—ã–∂–∏–≤–∞–Ω–∏–∏ –∏ –∑–∞—â–∏—Ç–µ", w: { reptile: 2, tree: 1 } },
          { t: "–õ—é–±–≤–∏", w: { mammal: 2, mycelium: 1 } },
        ],
      },
      {
        text: "–ñ–∏–∑–Ω—å –¥–ª—è —Ç–µ–±—è ‚Äî —ç—Ç–æ:",
        answers: [
          { t: "–ü—Ä–æ—Ü–µ—Å—Å —Ä–æ—Å—Ç–∞", w: { tree: 2, mycelium: 1 } },
          { t: "–ü—É—Ç—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏", w: { mycelium: 2, reptile: 1 } },
          { t: "–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π", w: { hive: 2, tree: 1 } },
          { t: "–°—Ä–µ–¥–∞ –¥–ª—è –≤—ã–∂–∏–≤–∞–Ω–∏—è", w: { reptile: 2, hive: 1 } },
          { t: "–ò—Å—Ç–æ—Ä–∏—è —á—É–≤—Å—Ç–≤", w: { mammal: 2, mycelium: 1 } },
        ],
      },
      {
        text: "–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ –¥–æ–∫–∞–∑—ã–≤–∞—Ç—å, —Ç—ã –±—ã:",
        answers: [
          { t: "–ü—Ä–æ—Å—Ç–æ –±—ã–ª", w: { tree: 2, reptile: 1 } },
          { t: "–ß—É–≤—Å—Ç–≤–æ–≤–∞–ª –∏ –Ω–∞–±–ª—é–¥–∞–ª", w: { mycelium: 2, tree: 1 } },
          { t: "–î–µ–ª–∞–ª —á—Ç–æ-—Ç–æ –ø–æ–ª–µ–∑–Ω–æ–µ", w: { hive: 2, mammal: 1 } },
          { t: "–û—Ç–¥—ã—Ö–∞–ª", w: { reptile: 2, tree: 1 } },
          { t: "–ë—ã–ª —Å –∫–µ–º-—Ç–æ", w: { mammal: 2, tree: 1 } },
        ],
      },
      {
        text: "–¢–≤–æ—è –≥–ª–∞–≤–Ω–∞—è —Å–∏–ª–∞ ‚Äî –≤:",
        answers: [
          { t: "–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏", w: { tree: 2, hive: 1 } },
          { t: "–ì–ª—É–±–∏–Ω–µ", w: { mycelium: 2, mammal: 1 } },
          { t: "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏", w: { hive: 2, reptile: 1 } },
          { t: "–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏", w: { reptile: 2, hive: 1 } },
          { t: "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏", w: { mammal: 2, mycelium: 1 } },
        ],
      },
      {
        text: "–ê —Ç–≤–æ—è –≥–ª–∞–≤–Ω–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å ‚Äî –≤:",
        answers: [
          { t: "–ü–∞—Å—Å–∏–≤–Ω–æ—Å—Ç–∏", w: { tree: 2, mycelium: 1 } },
          { t: "–†–∞—Å—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏", w: { mycelium: 2, mammal: 1 } },
          { t: "–ü–µ—Ä–µ–≥—Ä—É–∑–µ", w: { hive: 2, mammal: 1 } },
          { t: "–û—Ç—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç–∏", w: { reptile: 2, tree: 1 } },
          { t: "–†–∞–Ω–∏–º–æ—Å—Ç–∏", w: { mammal: 2, mycelium: 1 } },
        ],
      },
    ];

    // ---------- –õ–û–ì–ò–ö–ê –¢–ï–°–¢–ê ----------
    const app = document.getElementById("app");

    const state = {
      seed: null,
      order: [],
      idx: 0,
      // –∏—Å—Ç–æ—Ä–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: {qIndex, answerObj}
      picks: [],
      scores: { mammal: 0, reptile: 0, tree: 0, mycelium: 0, hive: 0 },
    };

    function shuffle(arr) {
      // Fisher-Yates
      const a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function reset() {
      state.idx = 0;
      state.picks = [];
      state.scores = { mammal: 0, reptile: 0, tree: 0, mycelium: 0, hive: 0 };
      state.order = shuffle([...Array(QUESTIONS.length).keys()]);
      render();
    }

    function progressPct() {
      return Math.round((state.idx / QUESTIONS.length) * 100);
    }

    function addWeights(w) {
      for (const k of Object.keys(w)) {
        state.scores[k] = (state.scores[k] || 0) + w[k];
      }
    }
    function removeWeights(w) {
      for (const k of Object.keys(w)) {
        state.scores[k] = (state.scores[k] || 0) - w[k];
      }
    }

    function pickAnswer(answerObj) {
      const qIndex = state.order[state.idx];
      state.picks[state.idx] = { qIndex, answerObj };
      addWeights(answerObj.w);
      state.idx += 1;
      render();
    }

    function goBack() {
      if (state.idx <= 0) return;
      const prev = state.picks[state.idx - 1];
      if (prev?.answerObj?.w) removeWeights(prev.answerObj.w);
      state.picks.pop();
      state.idx -= 1;
      render();
    }

    function computeResult() {
      const entries = Object.entries(state.scores);
      const max = Math.max(...entries.map(([, v]) => v));
      const top = entries.filter(([, v]) => v === max).map(([k]) => k);
      const winner = top[Math.floor(Math.random() * top.length)]; // —Ç–∞–π-–±—Ä–µ–π–∫
      return { winner, scores: state.scores };
    }

    function renderStart() {
      app.innerHTML = `
        <h1>–§–æ—Ä–º–∞ –∂–∏–∑–Ω–∏</h1>
        <div class="muted">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç (—Ñ–∞–Ω–æ–≤—ã–π). –í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è, –ª–æ–≥–∏–∫–∞ —Å–∫—Ä—ã—Ç–∞.</div>
        <div class="spacer"></div>
        <div class="row">
          <span class="pill">–í–æ–ø—Ä–æ—Å–æ–≤: ${QUESTIONS.length}</span>
          <span class="pill">–†–∞–Ω–¥–æ–º: –≤–∫–ª—é—á—ë–Ω</span>
        </div>
        <div class="spacer"></div>
        <button class="btn primary" id="startBtn">–ù–∞—á–∞—Ç—å</button>
      `;
      document.getElementById("startBtn").onclick = reset;
    }

    function renderQuestion() {
      const qIndex = state.order[state.idx];
      const q = QUESTIONS[qIndex];

      const answers = shuffle(q.answers); // —Ä–∞–Ω–¥–æ–º –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∫–∞–∂–¥—ã–π –ø–æ–∫–∞–∑ –≤–æ–ø—Ä–æ—Å–∞
      const pct = progressPct();

      app.innerHTML = `
        <div class="row" style="justify-content:space-between;">
          <div class="pill">–í–æ–ø—Ä–æ—Å ${state.idx + 1} –∏–∑ ${QUESTIONS.length}</div>
          <div class="pill">${pct}%</div>
        </div>
        <div class="spacer"></div>
        <div class="progress"><div class="bar" style="width:${pct}%;"></div></div>
        <div class="qtitle">${q.text}</div>
        <div class="answers" id="answers"></div>
        <div class="spacer"></div>
        <div class="row">
          <button class="btn" id="backBtn" ${state.idx === 0 ? "disabled" : ""}>–ù–∞–∑–∞–¥</button>
          <span class="muted mini">–í—ã–±–∏—Ä–∞–π –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ, –Ω–µ —Ä–∞–∑–¥—É–º—ã–≤–∞—è.</span>
        </div>
      `;

      const answersEl = document.getElementById("answers");
      answers.forEach((a) => {
        const btn = document.createElement("button");
        btn.className = "choice";
        btn.type = "button";
        btn.textContent = a.t;
        btn.onclick = () => pickAnswer(a);
        answersEl.appendChild(btn);
      });

      document.getElementById("backBtn").onclick = goBack;
    }

    function renderResult() {
      const { winner, scores } = computeResult();
      const max = Math.max(...Object.values(scores));
      const norm = max === 0 ? 1 : max;

      const order = Object.keys(TYPES);

      app.innerHTML = `
        <h1>–¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</h1>
        <div class="resultTitle">${TYPES[winner]}</div>
        <div class="muted">${TYPE_DESC[winner]}</div>

        <div class="spacer"></div>
        <div class="grid2">
          ${order.map((k) => {
            const v = scores[k];
            const pct = Math.round((v / norm) * 100);
            return `
              <div class="card" style="padding:14px; border-radius:14px;">
                <div class="scoreRow">
                  <div>${TYPES[k]}</div>
                  <div class="muted">${v}</div>
                </div>
                <div class="spacer" style="height:8px;"></div>
                <div class="scoreBarWrap"><div class="scoreBar" style="width:${pct}%;"></div></div>
              </div>
            `;
          }).join("")}
        </div>

        <div class="spacer"></div>
        <div class="row">
          <button class="btn primary" id="againBtn">–ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑</button>
          <button class="btn" id="homeBtn">–ù–∞ —Å—Ç–∞—Ä—Ç</button>
        </div>
      `;

      document.getElementById("againBtn").onclick = reset;
      document.getElementById("homeBtn").onclick = () => {
        state.idx = 0;
        state.picks = [];
        state.scores = { mammal: 0, reptile: 0, tree: 0, mycelium: 0, hive: 0 };
        state.order = [];
        render();
      };
    }

    function render() {
      if (!state.order.length && state.idx === 0 && state.picks.length === 0) {
        renderStart();
        return;
      }
      if (state.idx < QUESTIONS.length) {
        renderQuestion();
        return;
      }
      renderResult();
    }

    renderStart();
  </script>
</body>
</html>
